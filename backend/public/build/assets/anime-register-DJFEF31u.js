const c=document.getElementById("newAnimeRegisterBtn");c.addEventListener("click",()=>{const m=document.getElementById("newAnimeName"),d=[document.getElementById("howToRead1"),document.getElementById("howToRead2"),document.getElementById("howToRead3"),document.getElementById("howToRead4")],l=m.value.trim(),a=new FormData;a.append("new_anime_name",l),a.append("_token",csrfToken),d.forEach((e,n)=>{a.append(`how_to_read${n+1}`,e.value.trim())}),fetch(registerAnimeUrl,{method:"POST",headers:{"X-CSRF-TOKEN":csrfToken},body:a}).then(e=>e.ok?e.json():e.json().then(n=>{throw new Error(n.error||"登録失敗")})).then(e=>{const n=document.getElementById("animeNameContainer"),t=document.createElement("label");t.style.display="flex",t.style.alignItems="center",t.style.width="120px",t.style.gap="8px";const o=document.createElement("input");o.type="radio",o.name="anime_id",o.value=e.anime_id,o.checked=!0,t.appendChild(o),t.appendChild(document.createTextNode(e.anime_name)),n.insertBefore(t,n.firstChild),document.getElementById("newAnimeName").value="",document.getElementById("howToRead1").value="",document.getElementById("howToRead2").value="",document.getElementById("howToRead3").value="",document.getElementById("howToRead4").value=""}).catch(e=>{console.error("登録エラー:",e.message),alert("登録エラー: "+e.message)})});
